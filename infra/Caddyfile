# Five Crowns Production Caddyfile
# Caddy automatically obtains and renews TLS certificates from Let's Encrypt

# API and WebSocket server
fcrowns.centroid.is {
	# WebSocket endpoint
	@websocket {
		path /ws
		header Connection *Upgrade*
		header Upgrade websocket
	}
	reverse_proxy @websocket server:8080

	# Regular HTTP API
	reverse_proxy server:8080
}

# LiveKit server (WebRTC signaling)
livekit.fcrowns.centroid.is {
	reverse_proxy livekit:7880
}
